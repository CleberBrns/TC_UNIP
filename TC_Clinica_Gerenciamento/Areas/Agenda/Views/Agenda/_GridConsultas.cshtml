@model IList<TCC_Unip.Models.Servico.Agenda>

@{
    var user = (TCC_Unip.Models.Servico.Usuario)ViewBag.Usuario;
}

<link href="~/Content/bootstrap-datepicker3.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap-datepicker.min.js"></script>
<script src="~/Scripts/locales/bootstrap-datepicker.pt-BR.min.js"></script>

<style type="text/css">
    .datepicker {
        background: #808080;
        color: #ffffff;
    }
</style>

@if (user != null)
{
    <div class="row">

        <div class="col-md-12 col-sm-12" style="overflow-x:auto; padding-top: 5%">
            <table class="table table-striped" id="gridAgenda" carregada="false">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Data</th>
                        <th>Hora</th>
                        <th>Prossional</th>
                        <th>Valor</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var itemModel in Model)
                    {
                        <tr>
                            <td>@itemModel.Funcionario.Nome</td>
                            <td>@itemModel.Data.ToShortDateString()</td>
                            <td>@itemModel.Horario</td>
                            <td>@itemModel.Funcionario.Nome</td>
                            <td>R$ @itemModel.Valor</td>
                            <td class="text-center">
                                <a class="btnEditar" id-registro="@itemModel.Id" title="Editar" onclick="indexAgenda.modalEditar(this)"
                                   style="cursor: pointer;">
                                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                </a>
                            </td>
                            <td class="text-center">
                                <a class="btnExcluir" id-registro="@itemModel.Id"
                                   nome-registro="Dia @itemModel.Data.ToShortDateString() as @itemModel.Horario h"
                                   title="Excluir" onclick="indexAgenda.excluir(this, false)" style="cursor: pointer;">
                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <script>


        $('.dataPesquisa').datepicker({
            format: "dd/mm/yyyy",
            autoclose: true,
            language: "pt-BR"
        });

        $('.dataPesquisa').mask('99/99/9999', { placeholder: "dd/mm/aaaa" });

    $("#gridAgenda").DataTable({
        language: {
            url: "https://cdn.datatables.net/plug-ins/1.10.16/i18n/Portuguese-Brasil.json"
        },
        "columnDefs": [
            { "targets": [5, 6], "orderable": false, "searchable": false }
        ],
        "aaSorting": []
    });

    $("#btPesquisar").on('click', function () {
        indexAgenda.getAgendaPorDatas($("#dataInicio").val(), $("#dataFim").val());
    });

    var agendaListagem = {

    };

    </script>
}
